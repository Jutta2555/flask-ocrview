<!DOCTYPE html>
<html>
<head>
  <!-- <meta charset="utf-8"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
<title>
  OCR STL
</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@100&display=swap" rel="stylesheet">



<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script> 
<!-- <script src="static/js/signUp.js"></script> -->


<body>
  <div class="sidenav" id="mySidebar">
    <a href="{{ url_for('index') }}">Home</a>
    <hr>
    <h3 style="text-align: center;">ตรวจสอบ {{totalcheked}} /{{totalfile}}</h3>
    <hr>
    <h4 style="text-align: center;" onclick="openForm()" >ฐานคำผิดบ่อย {{totalcheked}} /{{totalfile}}</h4>

    <!-- <button class="open-button" onclick="openForm()" >Open Form</button> -->
    <div class="form-popup" id="misform" name="misform" >
      <form class="form-container" method="post" id="fmisform" name="fmisform" >
        <h1>เพิ่มคำผิดบ่อย</h1>
    
        <label for="email"><b>คำผิด </b></label>
        <input type="text" id="misword" name="misword" required>
        <br>
    
        <label for="psw"><b>คำแก้ไข </b></label>
        <input type="text" id="rghword" name="rghword" required>
    
        <button type="button" class="btn" onclick="addmissword()" >เพิ่มคำผิดบ่อย</button>
        <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
        
      </form>
    </div>
    
    <hr>
    {% for page in range(listpage)  %}
    <a href="{{ url_for('page',page=page ) }}"> ชุดไฟล์ที่ {{ page +1 }} </a>
    {% endfor %}
  </div>
  
  {% if ocrdata %}
    <h1 style="text-align: center;" >ชุดงานที่ {{ page+1}}</h1>
  {% endif %}

<div class="container"style=" flex-wrap: wrap;justify-content: center ; display: flex;">


    {% for cn in ocrdata  %}
    <div class="card" id="card{{ cn['index_file']}}" >
 
      <img src="{{ cn['filetext'] }}" srcset="" >
      <form  role="form" method="post" name="form{{ cn['index_file']}}" id="form{{ cn['index_file']}}" >

        <label class="checkbox-inline">

        <label class="switch" >
          {% if cn['checked'] %}
          <input onclick="mycheck({{ cn['index_file']}})"  type="checkbox" checked>
          {% else %}
          <input   onclick="mycheck({{ cn['index_file']}})" type="checkbox"  >
          {% endif %}
          <span  class="slider round"></span>
        </label> 
        <!-- <div id="relative-parent"> -->
          <!-- <span id="size-calibration"></span>                 -->
          
            <input type="hidden" id="index_file" name="index_file" value="{{ cn['index_file'] }}" >
            <input type="hidden" id="checked" name="checked" value="{{ cn['checked'] }}" >
            <input type="text" id="fidcard" name="idcard" value="{{ cn['idcard'] }}" style="left: 395px;top: 125px;font-size: 22px;  ">
            
            <input type="text" id="fidname" name="name" value="{{ cn['name'] }}" style="left: 250px;top: 185px;font-size: 22px;  ">
            <input type="text" id="fgender" name="gender" value="{{ cn['gender'] }}"  style="left: 920px;top: 210px;font-size: 20px;  ">
            <input type="text" id="fnationality" name="nationality" value="{{ cn['nationality'] }}"  style="left: 1130px;top: 210px;font-size: 20px;   ">
            
            <input type="text" id="fdob" name="dob" value="{{ cn['dob'] }}"   style="left: 250px;top: 260px;font-size: 20px; ">
            <input type="text" id="fstatus" name="status" value="{{ cn['status'] }}"  style="left: 1060px;top: 280px;font-size: 20px;  ">
            
            <input type="text" id="fmother" name="mother" value="{{ cn['mother'] }}" style="left: 250px;top: 340px;font-size: 20px; ">
            <input type="text" id="fid_mother" name="id_mother" value="{{ cn['id_mother'] }}" style="left: 510px;top: 340px;font-size: 16px;  ">
            <input type="text" id="fmothernation" name="mothernation" value="{{ cn['mothernation'] }}" style="left: 1030px;top: 365px;font-size: 20px;  ">

            <input type="text" id="ffather" name="father" value="{{ cn['father'] }}"  style="left: 250px;top: 415px;font-size: 20px;    ">
            <input type="text" id="fid_father" name="id_father" value="{{ cn['id_father'] }}"  style="left: 510px;top: 410px;font-size: 16px; ">
            <input type="text" id="ffathernation" name="fathernation" value="{{ cn['fathernation'] }}" style="left: 1030px;top: 435px;font-size: 20px;   ">
            
            <input type="text" id="faddr" name="addr" value="{{ cn['addr'] }}"  style="left: 250px;top: 569px;font-size: 20px;  background-color: whitesmoke;   ">
            <label for="ftumbol" style=" position: absolute;left: 230px;top: 599px;font-size: 20px; ">ต.</label><br>
            <input type="text" id="ftumbol" name="tumbol" value="{{ cn['tumbol'] }}" style="left: 250px;top: 599px;font-size: 20px; background-color: whitesmoke;    ">
            <label for="faumphur" style=" position: absolute;left: 230px;top: 630px;font-size: 20px; ">อ.</label><br>
            <input type="text" id="faumphur" name="aumphur" value="{{ cn['aumphur'] }}" style="left: 250px;top: 628px;font-size: 20px;background-color: whitesmoke;  ">
            <label for="fprovince" style=" position: absolute;left: 230px;top: 660px;font-size: 20px; ">จ.</label><br>
            <input type="text" id="fprovince" name="province" value="{{ cn['province'] }}"  style="left: 250px;top: 657px;font-size: 20px;background-color: whitesmoke;   ">
            <input type="text" id="fzipcode" name="zipcode" value="{{ cn['zipcode'] }}" style="left: 250px;top: 686px;font-size: 16px;background-color: whitesmoke;  ">

            <input type="text" id="fnotes" name="notes" value="{{ cn['notes'] }}"   style="left: 360px;top: 840px;font-size: 20px; width: 70%;  ">
            <div class="tooltip">.......thai Ocr......   
              <span class="tooltiptext">{{ cn['thaocr'] }}</span>
            </div>
            <div class="tooltip" style="margin-left: 700px;" >.....English Ocr......
              <span class="tooltiptext">{{ cn['engocr'] }}</span>
            </div>

      </form> 

    </div>
    {% endfor %}
  </div>

</body>



</div>
<script>


  function mycheck(id) {
    dataform = $("#form"+id).serialize() ;// JSON.stringify($("#form"+id).serializeArray());
    $.ajax({
      url: '/toggleUpdate',
      data: dataform , //$('form').serialize(),
      type: 'POST',
      success: function(response){
        if (response == '"Cancle"') {
          document.getElementById("checked").value=0;
          console.log("cancle");
        } else {
          document.getElementById("checked").value=1;
          console.log("Good ");
        }        
      },
      error: function(error){
        console.log(error);
      }
    });

  }
    
  function addmissword() {
    dataform = $("#fmisform").serialize() ;// JSON.stringify($("#form"+id).serializeArray());
    $.ajax({
      url: '/addmissword',
      data: dataform , //$('form').serialize(),
      type: 'POST',
      success: function(response){
        if (response == '"add"') {
          document.getElementById("misword").value="";
          document.getElementById("rghword").value="";
          console.log("addmissword");
        }        
      },
      error: function(error){
        console.log(error);
      }
    });

  }

  function openForm() {
    document.getElementById("misform").style.display = "block";
  }
  
  function closeForm() {
    document.getElementById("misform").style.display = "none";
  }

  
</script>
<!-- <script type="text/javascript">
    $(document).on('submit','#todo-form',function(e)
                   {
      console.log('Get data from form');
      var $form = $(this);
      var $error = $form.find(".error");
      var data = $form.serialize();      
      e.preventDefault();
      $.ajax({
        type:'POST',
        url:'/page/{{ page }}',
        data: data,
        //todo:$("#todo").val()       
        success:function()
        {
          alert('บันทึกข้อมูลเรียบร้อย');
        }
      })
    });

</script> -->

</html>